<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stamhoofd - Thila Coloma - Inschrijven en Beheer</title>
    <meta name="description" content="Stamhoofd platform voor inschrijvingen, afwezigheden melden en ledenbeheer van Thila Coloma.">
    <link rel="stylesheet" href="../assets/css/variables.css">
    <link rel="stylesheet" href="../assets/css/fonts.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/pages.css">
    <link rel="stylesheet" href="../assets/css/navigation.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    <link rel="stylesheet" href="https://use.typekit.net/rae0xxq.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <header class="simple-header">
        <div class="simple-header-content">
            <a href="../index.html" class="nav-icon" title="Home">
                <img src="../assets/images/Logo_TC_KLEUR.png" alt="Home">
            </a>
            <nav class="simple-nav">
                <a href="thilala.html" class="nav-icon" title="Thilala">
                    <img src="../assets/images/icons/Asset 11thilala.svg" alt="Thilala">
                </a>
                <a href="stamhoofd.html" class="nav-icon active" title="Stamhoofd">
                    <img src="../assets/images/icons/Asset 1stamhoofd.svg" alt="Stamhoofd">
                </a>
                <a href="kalender.html" class="nav-icon" title="Kalender">
                    <img src="../assets/images/icons/Asset 12agenda.svg" alt="Kalender">
                </a>
                <a href="takken.html" class="nav-icon" title="Takken">
                    <img src="../assets/images/icons/Asset 7takken.svg" alt="Takken">
                </a>
                <a href="verhuur.html" class="nav-icon" title="Verhuur">
                    <img src="../assets/images/icons/Asset 13verhuur.svg" alt="Verhuur">
                </a>
                <a href="meer.html" class="nav-icon nav-meer" title="Meer">
                    <img src="../assets/images/icons/Asset 19meer.svg" alt="Meer">
                </a>
            </nav>
            <div class="header-actions">
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="Zoeken..." class="search-input">
                    <button type="button" id="search-button" class="search-button" title="Zoeken">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="page-content">
        <div class="page-section">
            <h2>Stamhoofd Platform</h2>
            <p class="section-intro">
                Via het stamhoofd platform kun je je inschrijven voor activiteiten, gegevens nakijken, openstaande rekeningen betalen en meer. Klik <a href="https://inschrijven.thilacoloma.be/" target="_blank"><span>hier</span></a> om stamhoofd in een nieuw 
                tabblad te openen.
            </p>
            
            <!-- Fallback kaarten voor als iframe niet werkt -->
            <div id="stamhoofd-fallback" class="grid-2" style="display: none;">
                <div class="card">
                    <div class="card-content">
                        <h3>Inschrijvingen</h3>
                        <p>Schrijf je in voor het nieuwe scoutsjaar of meld nieuwe leden aan.</p>
                        <a href="https://stamhoofd.thilacoloma.be" class="btn btn-primary" target="_blank">
                            Naar Stamhoofd <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>
                <div class="card">
                    <div class="card-content">
                        <h3>Afwezigheid Melden</h3>
                        <p>Meld tijdig je afwezigheid voor vergaderingen en activiteiten.</p>
                        <a href="https://stamhoofd.thilacoloma.be/afwezigheid" class="btn btn-primary" target="_blank">
                            Afwezigheid Melden <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>
                <div class="card">
                    <div class="card-content">
                        <h3>Medische Fiche</h3>
                        <p>Download en upload je medische fiche voor kampen en activiteiten.</p>
                        <a href="https://stamhoofd.thilacoloma.be/medische-fiche" class="btn btn-primary" target="_blank">
                            Medische Fiche <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>
                <div class="card">
                    <div class="card-content">
                        <h3>Betalingen</h3>
                        <p>Overzicht van openstaande betalingen en lidgeld.</p>
                        <a href="https://stamhoofd.thilacoloma.be/betalingen" class="btn btn-primary" target="_blank">
                            Betalingen <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Iframe container -->
            <div class="stamhoofd-container">
                <iframe 
                    id="stamhoofd-iframe" 
                    src="https://inschrijven.thilacoloma.be/" 
                    style="width: 100%; height: 80vh; border: none; border-radius: var(--border-radius-md); box-shadow: 0 4px 6px rgba(0,0,0,0.1);"
                    title="Stamhoofd Platform">
                </iframe>
            </div>
        </div>
    </main>

    <script>
        // Check if iframe loads successfully
        const iframe = document.getElementById('stamhoofd-iframe');
        const fallback = document.getElementById('stamhoofd-fallback');
        
        iframe.onerror = function() {
            // If iframe fails to load, show fallback cards
            iframe.style.display = 'none';
            fallback.style.display = 'grid';
        };
        
        // Also check after a timeout
        setTimeout(() => {
            try {
                iframe.contentDocument;
            } catch (e) {
                // Cross-origin error means the site blocks iframes
                iframe.style.display = 'none';
                fallback.style.display = 'grid';
            }
        }, 3000);
        
        // Search functionality
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            
            function performSearch() {
                const query = searchInput.value.trim().toLowerCase();
                if (query === '') return;
                
                // Search through all text content on the page
                const sections = document.querySelectorAll('.page-section');
                let results = [];
                
                sections.forEach(section => {
                    const sectionTitle = section.querySelector('h2')?.textContent || '';
                    const sectionContent = section.textContent.toLowerCase();
                    
                    if (sectionContent.includes(query)) {
                        results.push({
                            title: sectionTitle,
                            element: section,
                            relevance: calculateRelevance(sectionContent, query)
                        });
                    }
                });
                
                // Highlight and scroll to most relevant result
                if (results.length > 0) {
                    results.sort((a, b) => b.relevance - a.relevance);
                    highlightSearchResults(query);
                    results[0].element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    alert('Geen resultaten gevonden voor "' + query + '"');
                }
            }
            
            function calculateRelevance(content, query) {
                const queryWords = query.split(' ');
                let score = 0;
                
                queryWords.forEach(word => {
                    const regex = new RegExp(word, 'gi');
                    const matches = content.match(regex);
                    if (matches) {
                        score += matches.length;
                    }
                });
                
                return score;
            }
            
            function highlightSearchResults(query) {
                // Remove existing highlights
                document.querySelectorAll('.search-highlight').forEach(el => {
                    el.classList.remove('search-highlight');
                });
                
                // Add new highlights
                const queryWords = query.split(' ');
                queryWords.forEach(word => {
                    if (word.length > 2) { // Only highlight words longer than 2 characters
                        const regex = new RegExp(`(${word})`, 'gi');
                        const walker = document.createTreeWalker(
                            document.body,
                            NodeFilter.SHOW_TEXT,
                            null,
                            false
                        );
                        
                        const textNodes = [];
                        let node;
                        while (node = walker.nextNode()) {
                            textNodes.push(node);
                        }
                        
                        textNodes.forEach(textNode => {
                            if (textNode.textContent.toLowerCase().includes(word)) {
                                const parent = textNode.parentElement;
                                if (parent && !parent.classList.contains('search-highlight')) {
                                    parent.classList.add('search-highlight');
                                }
                            }
                        });
                    }
                });
                
                // Remove highlights after 5 seconds
                setTimeout(() => {
                    document.querySelectorAll('.search-highlight').forEach(el => {
                        el.classList.remove('search-highlight');
                    });
                }, 5000);
            }
            
            // Event listeners
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        });
    </script>

    <style>
        /* Header center navigation override */
        .simple-header-content {
            position: relative;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: var(--spacing-md);
        }
        
        .simple-nav {
            justify-self: center;
            display: flex;
            gap: var(--spacing-md);
            align-items: center;
        }
        
        /* Navigation button hover effects */
        .nav-icon {
            transition: all 0.3s ease;
            border-radius: var(--border-radius-sm);
            padding: var(--spacing-xs);
        }
        
        .nav-icon:hover {
            transform: scale(1.03);
        }
        
        /* Specific background colors for each navigation button on hover */
        .simple-nav .nav-icon:nth-child(1):hover {
            background-color: var(--dark-color);
        }
        
        .simple-nav .nav-icon:nth-child(1):hover img {
            filter: brightness(0) saturate(100%) invert(48%) sepia(76%) saturate(1154%) hue-rotate(209deg) brightness(96%) contrast(93%);
        }
        
        .simple-nav .nav-icon:nth-child(2):hover {
            background-color: #2F1D4D;
        }
        
        .simple-nav .nav-icon:nth-child(2):hover img {
            filter: brightness(0) saturate(100%) invert(48%) sepia(39%) saturate(1230%) hue-rotate(248deg) brightness(85%) contrast(91%);
        }
        
        .simple-nav .nav-icon:nth-child(3):hover {
            background-color: #C7629D;
        }
        
        .simple-nav .nav-icon:nth-child(3):hover img {
            filter: brightness(0) saturate(100%) invert(73%) sepia(17%) saturate(1344%) hue-rotate(272deg) brightness(93%) contrast(88%);
        }
        
        .simple-nav .nav-icon:nth-child(4):hover {
            background-color: #7CA686;
        }
        
        .simple-nav .nav-icon:nth-child(4):hover img {
            filter: brightness(0) saturate(100%) invert(73%) sepia(22%) saturate(463%) hue-rotate(74deg) brightness(96%) contrast(89%);
        }
        
        .simple-nav .nav-icon:nth-child(5):hover {
            background-color: #3C4A2D;
        }
        
        .simple-nav .nav-icon:nth-child(5):hover img {
            filter: brightness(0) saturate(100%) invert(32%) sepia(18%) saturate(1171%) hue-rotate(61deg) brightness(90%) contrast(89%);
        }
        
        .simple-nav .nav-icon:nth-child(6):hover {
            background-color: #121E0F;
        }
        
        .simple-nav .nav-icon:nth-child(6):hover img {
            filter: brightness(0) saturate(100%) invert(25%) sepia(23%) saturate(1367%) hue-rotate(74deg) brightness(95%) contrast(92%);
        }
        
        .nav-icon.active {
            background-color: white;
        }
        
        .nav-icon.active img {
            filter: brightness(0) saturate(100%) invert(0%);
        }
        
        .nav-icon.active:hover {
            background-color: white;
        }
        
        .nav-icon.active:hover img {
            filter: brightness(0) saturate(100%) invert(0%);
        }
        
        .header-actions {
            justify-self: end;
        }
        
        /* Header search styling */
        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .search-container {
            display: flex;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-sm);
            transition: all 0.3s ease;
            overflow: hidden;
            height: 45px;
            width: 250px;
        }
        
        .search-container:focus-within {
            border-color: rgba(255, 255, 255, 0.5);
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .search-input {
            border: none;
            outline: none;
            padding: 0 15px;
            font-size: 0.9em;
            background: transparent;
            color: rgba(255, 255, 255, 0.9);
            flex: 1;
            font-family: var(--font-regular);
            height: 100%;
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
            font-family: var(--font-medium);
        }
        
        .search-container:focus-within .search-input {
            color: white;
        }
        
        .search-button {
            border: none;
            background: transparent;
            color: rgba(255, 255, 255, 0.8);
            padding: 0 12px;
            cursor: pointer;
            transition: var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: right;
            height: 100%;
            width: 50px;
        }
        
        .search-button:hover {
            color: white;
        }
        
        .search-button i {
            font-size: 0.9em;
        }
        
        /* Responsive search */
        @media (max-width: 1024px) {
            .search-container {
                width: 160px;
            }
        }
        
        @media (max-width: 768px) {
            .header-actions {
                gap: var(--spacing-sm);
            }
            
            .search-container {
                width: 140px;
            }
        }
        
        /* Search highlight styling */
        .search-highlight {
            background-color: rgba(230, 166, 48, 0.3) !important;
            border-radius: 3px;
            padding: 1px 2px;
            transition: background-color 0.3s ease;
        }
    </style>
</body>
</html>
